<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Assemblies · LARLIB.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="LARLIB.jl logo"/></a><h1>LARLIB.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="lar.html">LAR</a></li><li><a class="toctext" href="arrangement.html">Arrangement</a></li><li><a class="toctext" href="mapper.html">Mapper</a></li><li class="current"><a class="toctext" href="struct.html">Assemblies</a><ul class="internal"><li><a class="toctext" href="#Hierarchical-graphs-1">Hierarchical graphs</a></li><li><a class="toctext" href="#Hierarchical-structures-1">Hierarchical structures</a></li><li><a class="toctext" href="#Examples-1">Examples</a></li></ul></li><li><a class="toctext" href="glossary.html">Glossary</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="struct.html">Assemblies</a></li></ul><a class="edit-page" href="https://github.com/cvdlab/LARLIB.jl/blob/master/docs/src/struct.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Assemblies</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Assemblies-of-cellular-complexes-1" href="#Assemblies-of-cellular-complexes-1">Assemblies of cellular complexes</a></h1><p>Hierarchical models of complex assemblies are generated by aggregation of cellular complexes, each one defined in a local coordinate system, and possibly relocated by affine transformations of coordinates.  This operation may be repeated hierarchically, with subassemblies defined by aggregation of simpler parts, and so on, until to obtain a set of LAR models, which are not further decomposed.</p><p>Two main advantages can be found in a hierarchical modeling approach. Each component complex  and each assembly, at every hierarchical level, are defined independently from each other, using a local coordinate frame, suitably chosen to make its definition easier. Furthermore, only one copy of each component is stored in memory, and may be instanced in different locations and orientations how many times it is needed.</p><p><img src="images/struct-ab.png" alt/></p><blockquote><p><strong>Figure 1:</strong> Hierarchical assembly of a complex consisting of a single 2-cell (the square): (a) 2-skeleton; (b) 1-skeleton of the resulting complex.</p></blockquote><h2><a class="nav-anchor" id="Hierarchical-graphs-1" href="#Hierarchical-graphs-1">Hierarchical graphs</a></h2><p>A <a href="#structure">hierarchical model</a>, defined inductively as an assembly of component parts, is described by an <em>acyclic directed multigraph</em>, often called a <em>scene graph</em> or <em>hierarchical structure</em> in computer graphics and modeling.  The main algorithm with hierarchical assemblies is the <em>traversal</em> function, which transforms every component from <em>local coordinates</em> to global coordinates, called <em>world coordinates</em>.</p><h3><a class="nav-anchor" id="Acyclic-directed-multigraph-1" href="#Acyclic-directed-multigraph-1">Acyclic directed-multigraph</a></h3><p>The standard definition of a <em>directed graph</em> <span>$G$</span> states that it is a pair <span>$(N,A)$</span>, where <span>$N$</span> is a set of <em>nodes</em> and <span>$A$</span> is a set of directed <em>arcs</em>, given as ordered pairs of nodes.  Such a definition is not sufficient when more than one arc must be considered between the same pair of nodes.</p><p>In this case the notion of <em>multigraph</em> is introduced.  A <em>directed multigraph</em> is a triplet <span>$G := (N,A,f)$</span> where <span>$N$</span> and <span>$A$</span> are sets of nodes and arcs, respectively, and <span>$f: A \to \mathbf{N}^{2}$</span> is a mapping from arcs to node pairs.  In other words, in a multigraph, the same pair of nodes can be connected by multiple arcs.</p><p>Directed graphs or multigraphs are said to be <em>acyclic</em> when they do not contain cycles, i.e. when no path starts and ends at the same vertex.  <em>Trees</em> are common examples of acyclic graphs. A tree, where each non-leaf node is the root of a subtree, is the best model of the concept of <em>hierarchy</em>. Nodes in a tree can be associated with their integer <em>distance</em> from the root, defined by the number of edges on the unique path from the root to the node.  A tree can be layered by <em>levels</em>, by putting in the same subset (level) all the nodes with equal distance from the root.  </p><p>Acyclic graphs/multigraphs are also called <em>hierarchical graphs</em>, because they can be associated to a tree, generated at run-time by visiting the graph with some standard traversal algorithm, e.g. with a depth-first-search.  The ordered sequence of nodes produced by the traversal is sometimes called a <em>linearized graph</em>.  Each node in this sequence is suitably transformed from local coordinates to <em>world coordinates</em>, i.e. to the coordinates of the root, by the traversal algorithm.</p><h2><a class="nav-anchor" id="Hierarchical-structures-1" href="#Hierarchical-structures-1">Hierarchical structures</a></h2><p>Various kinds of hierarchical assemblies are used in standard graphical systems, such as <em>GKS</em>, <em>PHIGS</em> and <em>VRML</em>, as well as in graphics libraries like <em>Open Inventor</em> and <em>Java 3D</em>.  The <code>type</code> of hierarchical structures adopted here is inspired, even in the name of the function used for this purpose, by the one introduced by <em>PHIGS</em>, i.e. <code>Struct</code>.</p><p>The arcs of scene graphs are normally specified <em>implicitly</em> in real graphical systems. For example, an arc is actually specified when a node is contained or referred within another one. In particular, it is possible to specify a new container node together with either the matrix or the parameters of the transformation to be associated with the the arc that connects the new container to the current node.</p><h2><a class="nav-anchor" id="Examples-1" href="#Examples-1">Examples</a></h2><p>A typical LAR geometrical model is a <code>Tuple</code> (triple or pair), where the first element is the <em>matrix of coordinates</em> of vertices, and the remaining arrays of array of integers provide the <em>vertex indices</em> of each <em>cell</em>. </p><pre><code class="language-julia">julia&gt; square = ([[0; 0] [0; 1] [1; 0] [1; 1]], [[1, 2, 3,
4]], [[1,2], [1,3], [2,4], [3,4]])
# output
([0 0 1 1; 0 1 0 1], Array{Int64,1}[[1, 2, 3, 4]], Array{Int64,1}[[1, 2], [1,
3], [2, 4], [3, 4]]) </code></pre><p>A <em>container</em> of geometrical objects is defined by applying the function <code>Struct</code> to the array of contained objects.  The value returned from the application is a value of  <em>Struct</em> type.  The coordinate system of this value is the one associated with the first object of the <code>Struct</code> parameters.  Also, the resulting geometrical value is often associated with a variable name.</p><p>An affine <span>$3\times 3$</span> transformation matrix, generated in homogeneous normalized coordinates by the function <code>t(-0.5,-0.5)</code>, can be <em>applied</em> to a LAR object <code>obj</code> both <em>explicitly</em>, by using the higher function <code>apply</code><span>$\to$</span><code>Matrix</code><span>$\to$</span><code>obj</code>, or <em>implicitly</em> by creating a <code>Struct</code> hierarchical object, as shown by the following examples:</p><pre><code class="language-julia">julia&gt; table = apply( t(-0.5,-0.5) )( square )
# output
([-0.5 -0.5 0.5 0.5; -0.5 0.5 -0.5 0.5], Array{Int64,1}[[1, 2, 3, 4]],
Array{Int64,1}[[1, 2], [1, 3], [2, 4], [3, 4]])

julia&gt; table = Struct([ t(-0.5,-0.5), square ])
# output
Struct(Any[[1.0 0.0 -0.5; 0.0 1.0 -0.5; 0.0 0.0 1.0], ([0 0 1 1; 0 1 0 1],
Array{Int64,1}[[1, 2, 3, 4]], Array{Int64,1}[[1, 2], [1, 3], [2, 4], [3, 4]])],
Array[[-0.5; -0.5], [0.5; 0.5]], &quot;10234090646332247690&quot;, 2, &quot;feature&quot;) </code></pre><p>The generation of container nodes may continue hierarchically by suitably applying <code>Struct</code>. Notice that each LAR object in a <code>Struct</code> container is transformed by each matrix before it <em>within the container</em>, going from right to left. The action of a transformation (tensor) extends to each object on its right within its own container. Whereas,  the action of a tensor does not extend outside its container, according to the semantics of <em>PHIGS</em> structures.</p><pre><code class="language-julia">chair = Struct([ t(0.75,0), s(0.35,0.35), table ])</code></pre><p>The object <code>struct0</code> below contains a table and 4 chairs, <code>struct01</code> is a row of 10 suitably translated instances of <code>struct0</code>, and <code>struct02</code> is another assembly of suitably translated <code>struct01</code> instances. </p><pre><code class="language-julia">struct0 = Struct([ t(2,1),table, repeat([r(pi/2), chair ], outer = 4)... ])
struct01 = Struct( repeat([ struct0, t(0,2.5) ], outer = 10) )
struct02 = Struct( repeat([ struct01, t(3,0) ], outer = 10) )</code></pre><p>The function <code>evalStruct</code> generates an <code>Array</code> of LAR models, each one originally defined  in a <em>local coordinate</em> system, transforming all of them in the same <em>world coordinate</em>, equal to the ones of the <em>first</em> object in the <code>Struct</code> parameter sequence.</p><p>Conversely, the <code>struct2lar</code> function generates a <em>single</em> LAR model (cellular complex), whose components are here assigned respectively to variables <code>W</code> (coordinates of vertices), <code>FW</code> faces (2-cells), and <code>EW</code> edges (1-cells). Notice that the whole model is <em>embedded in 2D</em>, since the <code>W</code> array (coordinates by columns) has <em>two rows</em></p><pre><code class="language-julia">scene = evalStruct(struct02)	# array of LAR models
W,FW,EW = struct2lar(struct02)	# single LAR model</code></pre><p>Anyway, the <code>larView</code> function, which instances a <code>pyplasm</code> viewer, can be applied both to an array of models and to a single model. The examples below intend to show either the 2-cells or the 1-cells of the generated cellular complex, respectively.</p><pre><code class="language-julia">using LARVIEW
larView(scene)
larView(W,EW)</code></pre><p>A different example provides a <code>sphere</code>, and a <code>cylinder</code> instance suitably translated, within the same <code>Struct</code> container. Of course, we could define a hierarchical assembly of any size and deep, containing any number of <code>Struct</code> nodes.</p><pre><code class="language-julia">assembly = Struct([sphere()(), t(3,0,-1), cylinder()()])
using LARVIEW
larView(struct2lar(assembly))</code></pre><p><img src="images/struct-cd.png" alt/></p><blockquote><p><strong>Figure 2:</strong> (a) Enlargement of a portion of the exploded complex in Fig.1; (b) an assembly with two cuboidal 2-complexes (surfaces) embedded in 3D.</p></blockquote><footer><hr/><a class="previous" href="mapper.html"><span class="direction">Previous</span><span class="title">Mapper</span></a><a class="next" href="glossary.html"><span class="direction">Next</span><span class="title">Glossary</span></a></footer></article></body></html>
